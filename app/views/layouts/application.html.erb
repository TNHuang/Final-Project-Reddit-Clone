<!DOCTYPE html>
<html>
<head>
  <title>RedditClone</title>
  <%= stylesheet_link_tag    "application", media: "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>

  <title>Pusher Test</title>
  <script src="//js.pusher.com/2.2/pusher.min.js" type="text/javascript"></script>

</head>
<body>


<%#= render "shared/subs_nav" %>

<% if flash[:errors] %>
<%= flash[:errors] %>
<% end %>

<header class="header-nav">
<div class="reddit-logo"></div>
<nav class="subs-nav" >

</nav>
<div class="clearfix">
  <div class="login-container clearfix">

    <% if sign_in? %>

    <script type="text/javascript">
    window.current_user = {
      id: "<%= current_user.id %>",
      name: "<%= current_user.name %>"
    }
    </script>

     <span>Welcome! <a href="<%= user_url(current_user) %>"><%= current_user.name %></a> </span>
      <form action="<%= sign_out_all_sessions_url %>" method="POST">
        <%= form_auth %><%= form_delete %>
        <input type="submit" value="Sign Out All Sessions">
      </form>
      <form action="<%= sign_in_url(current_sign_in) %>" method="POST">
        <%= form_auth %><%= form_delete %>
        <input type="submit" value="Sign Out">
      </form>
    <% else %>
     <div class="Sign-in-up-container"><%= link_to "Sign In", new_sign_in_url %>
      <%= link_to "Sign Up", new_user_url %></div>
    <% end %>
  </div>
</div>
</header>




<div id="header"></div>
<div id="main">
  <div class="body-wrapper">
    <%= yield %>
  </div>
</div>


<script type="text/javascript">
  // Enable pusher logging - don't include this in production
  // Pusher.log = function(message) {
  //   if (window.console && window.console.log) {
  //     window.console.log(message);
  //   }
  // };

  // var pusher = new Pusher("970a77788f6f31997f46");
  // var channel = pusher.subscribe('reddit_channel');
  // channel.bind('my_event', function(data) {
  //   var msg = "<li>" + current_user.name +": " +data.message +"</li>"
  //   $('.chat').append(msg)
  //
  //   alert(data.message);
  // });
</script>


</body>
</html>
